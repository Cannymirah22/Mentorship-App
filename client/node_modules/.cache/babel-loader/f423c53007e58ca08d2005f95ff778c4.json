{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\STEPuHP App\\\\client\\\\src\\\\components\\\\dashboard\\\\mentorDashboard\\\\dashboardLinks\\\\post\\\\Post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { getAllPosts, getOlderPosts, submitComment, submitPost, updatePost } from \"../../../../../actions/post\";\nimport SinglePost from \"./singlePost/SinglePost\";\nimport PaperAirplaneIcon from \"../../../../../assets/icons/PaperAirplaneIcon\";\nimport { CSSTransition } from \"react-transition-group\";\nimport ModalOverlay from \"../../../../modal/ModalOverlay\";\nimport PostEditModal from \"./postModals/PostEditModal\";\nimport PostDeleteModal from \"./postModals/PostDeleteModal\";\nimport SingleComment from \"./singleComment/SingleComment\";\nimport CommentDeleteModal from \"./postModals/CommentDeleteModal\";\nimport Loading from \"../../../../loading/Loading\";\nimport RichEditor from \"../../../../richEditor/RichEditor\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = ({\n  socket,\n  streamUpdated,\n  setStreamUpdated\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [isHidden, setIsHidden] = useState(true); // state variable to show viewing pill on the selected post\n\n  const [selectedPostIndex, setSelectedPostIndex] = useState(-1); // state to store the selected post to edit\n\n  const [selectedPost, setSelectedPost] = useState(null); // state variable to get the selected comment\n\n  const [selectedComment, setSelectedComment] = useState(null); // state to set the submit button disable\n\n  const [disablePost, setDisablePost] = useState(true); // states for loading\n\n  const [postLoading, setPostLoading] = useState(false);\n  const [oldPostLoading, setOldPostLoading] = useState(false);\n  const [commentLoading, setCommentLoading] = useState(false); // state to control the modal show and dont show\n\n  const [showOverlay, setShowOverlay] = useState(false);\n  const [showPostEditModal, setShowPostEditModal] = useState(false);\n  const [showPostDeleteModal, setShowPostDeleteModal] = useState(false);\n  const [showCommentDeleteModal, setShowCommentDeleteModal] = useState(false); // refs used for css transition to work for the modal and the overlay\n\n  const postEditModalRef = useRef(null);\n  const postDeleteModalRef = useRef(null);\n  const commentDeleteModalRef = useRef(null);\n  const overlayRef = useRef(null);\n  useEffect(() => {\n    dispatch(getAllPosts(history, 1));\n  }, [dispatch, history]); // fetching posts from the global state\n\n  const {\n    posts\n  } = useSelector(state => state.post); // getting all comments for a post from the global store after api call\n\n  const {\n    comments\n  } = useSelector(state => state.post);\n  console.log(\"posts\", posts); // state variable to store the post body\n\n  const [postBody, setPostBody] = useState({\n    body: \"\",\n    commentEnabled: true\n  }); // state variable to store the comment body\n\n  const [commentBody, setCommentBody] = useState({\n    body: \"\"\n  }); // function to make scroll focus to the recent post posted\n\n  const scrollPost = useRef();\n\n  const executeScroll = () => {\n    var _scrollPost$current;\n\n    scrollPost === null || scrollPost === void 0 ? void 0 : (_scrollPost$current = scrollPost.current) === null || _scrollPost$current === void 0 ? void 0 : _scrollPost$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }; // updating the state variable for post body\n\n\n  const handleChange = content => {\n    let text = content.replace(/<[^>]+>/g, \"\"); // regex to convert html to plain text\n\n    if (text === \"\") setDisablePost(true);else setDisablePost(false);\n    setPostBody(prevState => ({ ...prevState,\n      body: content\n    }));\n  }; // fucntion to set the comment disable state\n\n\n  const handleToggleCommentDisable = () => {\n    setPostBody(prevState => ({ ...prevState,\n      commentEnabled: !prevState.commentEnabled\n    }));\n  };\n\n  console.log(postBody); // function to handle the post submission\n\n  const handlePostSubmit = (e, postId, postContent) => {\n    e.preventDefault();\n\n    if (!postId) {\n      dispatch(submitPost(history, postBody, socket, executeScroll));\n      setPostBody({\n        body: \"\",\n        commentEnabled: true\n      });\n    } else {\n      dispatch(updatePost(history, postId, postContent));\n    } // setSelectedPost(null);\n    // setSelectedPostIndex(-1);\n\n  };\n\n  console.log(\"selected post\", selectedPost);\n  console.log(\"selected index\", selectedPostIndex); // function to update the state for the comment body\n\n  const handleCommentChange = e => {\n    setCommentBody({ ...commentBody,\n      body: e.target.value\n    });\n  }; // function to handle the comment submission\n\n\n  const handleCommentSubmit = e => {\n    e.preventDefault();\n    dispatch(submitComment(history, commentBody, executeScrollToComment, selectedPost._id));\n    setCommentBody({\n      body: \"\"\n    });\n  }; // ref to focus the comment typing box when reply is clicked\n\n\n  const focusInput = useRef(); // function to make scroll focus to the recent comment posted\n\n  const scrollComment = useRef();\n\n  const executeScrollToComment = () => {\n    var _scrollComment$curren;\n\n    scrollComment === null || scrollComment === void 0 ? void 0 : (_scrollComment$curren = scrollComment.current) === null || _scrollComment$curren === void 0 ? void 0 : _scrollComment$curren.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }; // function to focus the comment input box when reply is clicked\n\n\n  const executeFocusInput = () => {\n    setTimeout(() => {\n      var _focusInput$current;\n\n      focusInput === null || focusInput === void 0 ? void 0 : (_focusInput$current = focusInput.current) === null || _focusInput$current === void 0 ? void 0 : _focusInput$current.focus();\n    }, 10);\n  }; // state to set the number of pages to fetch the old messages\n\n\n  const [page, setPage] = useState(2); // load Older posts\n\n  const loadOlderPosts = () => {\n    console.log(\"load more msgs\");\n    setOldPostLoading(true);\n    setPage(page + 1);\n    dispatch(getOlderPosts(history, page, setOldPostLoading));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full grid grid-cols-12 relative pl-2\",\n    children: [/*#__PURE__*/_jsxDEV(CSSTransition, {\n      nodeRef: overlayRef,\n      in: showOverlay,\n      timeout: 300,\n      classNames: \"overlay\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(ModalOverlay, {\n        nodeRef: overlayRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      nodeRef: postEditModalRef,\n      in: showPostEditModal,\n      timeout: 300,\n      classNames: \"modal\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(PostEditModal, {\n        nodeRef: postEditModalRef,\n        setShowOverlay: setShowOverlay,\n        setShowPostEditModal: setShowPostEditModal,\n        selectedPost: selectedPost,\n        handlePostSubmit: handlePostSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      nodeRef: postDeleteModalRef,\n      in: showPostDeleteModal,\n      timeout: 300,\n      classNames: \"modal\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(PostDeleteModal, {\n        nodeRef: postDeleteModalRef,\n        setShowOverlay: setShowOverlay,\n        setShowPostDeleteModal: setShowPostDeleteModal,\n        id: selectedPost === null || selectedPost === void 0 ? void 0 : selectedPost._id,\n        setSelectedPost: setSelectedPost,\n        setSelectedPostIndex: setSelectedPostIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      nodeRef: commentDeleteModalRef,\n      in: showCommentDeleteModal,\n      timeout: 300,\n      classNames: \"modal\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(CommentDeleteModal, {\n        nodeRef: commentDeleteModalRef,\n        setShowOverlay: setShowOverlay,\n        setShowCommentDeleteModal: setShowCommentDeleteModal,\n        id: selectedComment === null || selectedComment === void 0 ? void 0 : selectedComment._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-8 border-r-2 border-gray-200 flex flex-col overflow-y-auto pt-2 pr-2 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setPostLoading(true);\n          setStreamUpdated(false);\n          dispatch(getAllPosts(history, 1, setPostLoading));\n          setSelectedPost(null);\n          setSelectedPostIndex(-1);\n        },\n        className: `py-1 px-3 bg-white rounded-md text-blue-600 shadow-m32 hover:shadow-md transition-all flex items-center justify-between absolute left-1/2 transform -translate-x-1/2 -top-10 ${streamUpdated ? \"translate-y-24\" : \"\"} text-sm`,\n        children: \"Stream updated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `h-3/4 overflow-y-auto mb-3 pr-2 flex flex-col-reverse underlineLink ${postLoading && \"justify-center\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          ref: scrollPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }, this), postLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {\n            width: \"40px\",\n            height: \"40px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 25\n        }, this) : posts.sort((a, b) => {\n          return a.postData.createdAt < b.postData.createdAt ? 1 : -1;\n        }).map((post, index) => {\n          return /*#__PURE__*/_jsxDEV(SinglePost, {\n            post: post.postData,\n            author: post.authorData,\n            setShowOverlay: setShowOverlay,\n            setShowPostEditModal: setShowPostEditModal,\n            setShowPostDeleteModal: setShowPostDeleteModal,\n            setSelectedPost: setSelectedPost,\n            setIsHidden: setIsHidden,\n            setSelectedPostIndex: setSelectedPostIndex,\n            selectedPostIndex: selectedPostIndex,\n            executeFocusInput: executeFocusInput,\n            setCommentLoading: setCommentLoading,\n            index: index\n          }, post.postData._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 37\n          }, this);\n        }), !postLoading ? oldPostLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {\n            alt: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadOlderPosts,\n          title: \"Load message\",\n          className: `justify-self-center p-1.5 rounded-md disabled:opacity-50 text-gray-400 hover:text-gray-700 text-xs transition-all mb-1`,\n          children: \"Load previous post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"h-1/4 relative border border-solid border-b border-gray-200 flex flex-col items-center justify-start\",\n        onSubmit: handlePostSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex items-center justify-end p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center justify-between gap-x-2 mr-5 cursor-pointer text-sm bg-gray-200 py-1.5 px-2 rounded-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain float-left cursor-pointer focus:ring-0 focus:ring-offset-0\",\n              type: \"checkbox\",\n              id: \"disableComment\",\n              onChange: handleToggleCommentDisable,\n              checked: !postBody.commentEnabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"cursor-pointer\",\n              htmlFor: \"disableComment\",\n              children: \"Disable comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: disablePost,\n            type: \"submit\",\n            title: \"Submit post\",\n            className: \"py-1 px-2 bg-blue-600 rounded-md text-white disabled:opacity-50 hover:bg-blue-800 transition-all flex items-center justify-between\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(RichEditor, {\n          contents: postBody.body,\n          handleChange: handleChange,\n          isAutofocus: false,\n          minHeight: \"12vh\",\n          height: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-4 p-4 flex flex-col justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-bold mb-5\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-650 overflow-y-auto flex flex-col\",\n          children: [selectedPostIndex !== -1 ? commentLoading ? /*#__PURE__*/_jsxDEV(Loading, {\n            myStyle: \"w-7 h-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 33\n          }, this) : comments.map(comment => {\n            return /*#__PURE__*/_jsxDEV(SingleComment, {\n              author: comment.authorData,\n              comment: comment.commentData,\n              setShowCommentDeleteModal: setShowCommentDeleteModal,\n              setShowOverlay: setShowOverlay,\n              setSelectedComment: setSelectedComment\n            }, comment.commentData._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 41\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: scrollComment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this), isHidden || /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"group\",\n        onSubmit: handleCommentSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-12 mt-4 border border-gray-400 rounded-full focus-within:ring-2 focus-within:ring-blue-600 focus-within:border-transparent\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: commentBody.body,\n            ref: focusInput,\n            onChange: handleCommentChange,\n            name: \"comment\",\n            type: \"text\",\n            placeholder: \"Type a comment...\",\n            className: \"col-span-10 bg-transparent outline-none border-none focus:ring-0 pl-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            title: \"Submit comment\",\n            disabled: commentBody.body === \"\" ? true : false,\n            className: \"w-12 h-12 ml-3 col-start-11 col-span-2 rounded-full flex items-center justify-center place-self-center text-blue-600 disabled:opacity-50\",\n            children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n              alt: false,\n              myStyle: \"h-6 w-6 transform rotate-90\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Post, \"phK8U3pSElFRW6HSijpJx1MkGe4=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/STEPuHP App/client/src/components/dashboard/mentorDashboard/dashboardLinks/post/Post.js"],"names":["React","useEffect","useRef","useState","useDispatch","useSelector","useHistory","getAllPosts","getOlderPosts","submitComment","submitPost","updatePost","SinglePost","PaperAirplaneIcon","CSSTransition","ModalOverlay","PostEditModal","PostDeleteModal","SingleComment","CommentDeleteModal","Loading","RichEditor","Post","socket","streamUpdated","setStreamUpdated","dispatch","history","isHidden","setIsHidden","selectedPostIndex","setSelectedPostIndex","selectedPost","setSelectedPost","selectedComment","setSelectedComment","disablePost","setDisablePost","postLoading","setPostLoading","oldPostLoading","setOldPostLoading","commentLoading","setCommentLoading","showOverlay","setShowOverlay","showPostEditModal","setShowPostEditModal","showPostDeleteModal","setShowPostDeleteModal","showCommentDeleteModal","setShowCommentDeleteModal","postEditModalRef","postDeleteModalRef","commentDeleteModalRef","overlayRef","posts","state","post","comments","console","log","postBody","setPostBody","body","commentEnabled","commentBody","setCommentBody","scrollPost","executeScroll","current","scrollIntoView","behavior","handleChange","content","text","replace","prevState","handleToggleCommentDisable","handlePostSubmit","e","postId","postContent","preventDefault","handleCommentChange","target","value","handleCommentSubmit","executeScrollToComment","_id","focusInput","scrollComment","executeFocusInput","setTimeout","focus","page","setPage","loadOlderPosts","sort","a","b","postData","createdAt","map","index","authorData","comment","commentData"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport {\n    getAllPosts,\n    getOlderPosts,\n    submitComment,\n    submitPost,\n    updatePost,\n} from \"../../../../../actions/post\";\n\nimport SinglePost from \"./singlePost/SinglePost\";\nimport PaperAirplaneIcon from \"../../../../../assets/icons/PaperAirplaneIcon\";\nimport { CSSTransition } from \"react-transition-group\";\nimport ModalOverlay from \"../../../../modal/ModalOverlay\";\nimport PostEditModal from \"./postModals/PostEditModal\";\nimport PostDeleteModal from \"./postModals/PostDeleteModal\";\nimport SingleComment from \"./singleComment/SingleComment\";\nimport CommentDeleteModal from \"./postModals/CommentDeleteModal\";\nimport Loading from \"../../../../loading/Loading\";\nimport RichEditor from \"../../../../richEditor/RichEditor\";\n\nconst Post = ({ socket, streamUpdated, setStreamUpdated }) => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const [isHidden, setIsHidden] = useState(true);\n    // state variable to show viewing pill on the selected post\n    const [selectedPostIndex, setSelectedPostIndex] = useState(-1);\n    // state to store the selected post to edit\n    const [selectedPost, setSelectedPost] = useState(null);\n    // state variable to get the selected comment\n    const [selectedComment, setSelectedComment] = useState(null);\n    // state to set the submit button disable\n    const [disablePost, setDisablePost] = useState(true);\n\n    // states for loading\n    const [postLoading, setPostLoading] = useState(false);\n    const [oldPostLoading, setOldPostLoading] = useState(false);\n    const [commentLoading, setCommentLoading] = useState(false);\n\n    // state to control the modal show and dont show\n    const [showOverlay, setShowOverlay] = useState(false);\n    const [showPostEditModal, setShowPostEditModal] = useState(false);\n    const [showPostDeleteModal, setShowPostDeleteModal] = useState(false);\n    const [showCommentDeleteModal, setShowCommentDeleteModal] = useState(false);\n\n    // refs used for css transition to work for the modal and the overlay\n    const postEditModalRef = useRef(null);\n    const postDeleteModalRef = useRef(null);\n    const commentDeleteModalRef = useRef(null);\n    const overlayRef = useRef(null);\n\n    useEffect(() => {\n        dispatch(getAllPosts(history, 1));\n    }, [dispatch, history]);\n\n    // fetching posts from the global state\n    const { posts } = useSelector((state) => state.post);\n    // getting all comments for a post from the global store after api call\n    const { comments } = useSelector((state) => state.post);\n\n    console.log(\"posts\", posts);\n\n    // state variable to store the post body\n    const [postBody, setPostBody] = useState({\n        body: \"\",\n        commentEnabled: true,\n    });\n    // state variable to store the comment body\n    const [commentBody, setCommentBody] = useState({\n        body: \"\",\n    });\n\n    // function to make scroll focus to the recent post posted\n    const scrollPost = useRef();\n    const executeScroll = () => {\n        scrollPost?.current?.scrollIntoView({\n            behavior: \"smooth\",\n        });\n    };\n\n    // updating the state variable for post body\n    const handleChange = (content) => {\n        let text = content.replace(/<[^>]+>/g, \"\"); // regex to convert html to plain text\n        if (text === \"\") setDisablePost(true);\n        else setDisablePost(false);\n        setPostBody((prevState) => ({ ...prevState, body: content }));\n    };\n\n    // fucntion to set the comment disable state\n    const handleToggleCommentDisable = () => {\n        setPostBody((prevState) => ({\n            ...prevState,\n            commentEnabled: !prevState.commentEnabled,\n        }));\n    };\n\n    console.log(postBody);\n\n    // function to handle the post submission\n    const handlePostSubmit = (e, postId, postContent) => {\n        e.preventDefault();\n        if (!postId) {\n            dispatch(submitPost(history, postBody, socket, executeScroll));\n            setPostBody({\n                body: \"\",\n                commentEnabled: true,\n            });\n        } else {\n            dispatch(updatePost(history, postId, postContent));\n        }\n        // setSelectedPost(null);\n        // setSelectedPostIndex(-1);\n    };\n\n    console.log(\"selected post\", selectedPost);\n    console.log(\"selected index\", selectedPostIndex);\n\n    // function to update the state for the comment body\n    const handleCommentChange = (e) => {\n        setCommentBody({ ...commentBody, body: e.target.value });\n    };\n\n    // function to handle the comment submission\n    const handleCommentSubmit = (e) => {\n        e.preventDefault();\n        dispatch(submitComment(history, commentBody, executeScrollToComment, selectedPost._id));\n        setCommentBody({\n            body: \"\",\n        });\n    };\n\n    // ref to focus the comment typing box when reply is clicked\n    const focusInput = useRef();\n\n    // function to make scroll focus to the recent comment posted\n    const scrollComment = useRef();\n    const executeScrollToComment = () => {\n        scrollComment?.current?.scrollIntoView({\n            behavior: \"smooth\",\n        });\n    };\n\n    // function to focus the comment input box when reply is clicked\n    const executeFocusInput = () => {\n        setTimeout(() => {\n            focusInput?.current?.focus();\n        }, 10);\n    };\n\n    // state to set the number of pages to fetch the old messages\n    const [page, setPage] = useState(2);\n\n    // load Older posts\n    const loadOlderPosts = () => {\n        console.log(\"load more msgs\");\n        setOldPostLoading(true);\n        setPage(page + 1);\n        dispatch(getOlderPosts(history, page, setOldPostLoading));\n    };\n\n    return (\n        <div className=\"w-full h-full grid grid-cols-12 relative pl-2\">\n            <CSSTransition\n                nodeRef={overlayRef}\n                in={showOverlay}\n                timeout={300}\n                classNames=\"overlay\"\n                unmountOnExit\n            >\n                <ModalOverlay nodeRef={overlayRef} />\n            </CSSTransition>\n            <CSSTransition\n                nodeRef={postEditModalRef}\n                in={showPostEditModal}\n                timeout={300}\n                classNames=\"modal\"\n                unmountOnExit\n            >\n                <PostEditModal\n                    nodeRef={postEditModalRef}\n                    setShowOverlay={setShowOverlay}\n                    setShowPostEditModal={setShowPostEditModal}\n                    selectedPost={selectedPost}\n                    handlePostSubmit={handlePostSubmit}\n                />\n            </CSSTransition>\n            <CSSTransition\n                nodeRef={postDeleteModalRef}\n                in={showPostDeleteModal}\n                timeout={300}\n                classNames=\"modal\"\n                unmountOnExit\n            >\n                <PostDeleteModal\n                    nodeRef={postDeleteModalRef}\n                    setShowOverlay={setShowOverlay}\n                    setShowPostDeleteModal={setShowPostDeleteModal}\n                    id={selectedPost?._id}\n                    setSelectedPost={setSelectedPost}\n                    setSelectedPostIndex={setSelectedPostIndex}\n                />\n            </CSSTransition>\n            <CSSTransition\n                nodeRef={commentDeleteModalRef}\n                in={showCommentDeleteModal}\n                timeout={300}\n                classNames=\"modal\"\n                unmountOnExit\n            >\n                <CommentDeleteModal\n                    nodeRef={commentDeleteModalRef}\n                    setShowOverlay={setShowOverlay}\n                    setShowCommentDeleteModal={setShowCommentDeleteModal}\n                    id={selectedComment?._id}\n                />\n            </CSSTransition>\n            <div className=\"col-span-8 border-r-2 border-gray-200 flex flex-col overflow-y-auto pt-2 pr-2 relative\">\n                <button\n                    onClick={() => {\n                        setPostLoading(true);\n                        setStreamUpdated(false);\n                        dispatch(getAllPosts(history, 1, setPostLoading));\n                        setSelectedPost(null);\n                        setSelectedPostIndex(-1);\n                    }}\n                    className={`py-1 px-3 bg-white rounded-md text-blue-600 shadow-m32 hover:shadow-md transition-all flex items-center justify-between absolute left-1/2 transform -translate-x-1/2 -top-10 ${\n                        streamUpdated ? \"translate-y-24\" : \"\"\n                    } text-sm`}\n                >\n                    Stream updated\n                </button>\n                <div\n                    className={`h-3/4 overflow-y-auto mb-3 pr-2 flex flex-col-reverse underlineLink ${\n                        postLoading && \"justify-center\"\n                    }`}\n                >\n                    <div ref={scrollPost}></div>\n                    {postLoading ? (\n                        <div className=\"flex items-center justify-center\">\n                            <Loading width=\"40px\" height=\"40px\" />\n                        </div>\n                    ) : (\n                        posts\n                            .sort((a, b) => {\n                                return a.postData.createdAt < b.postData.createdAt ? 1 : -1;\n                            })\n                            .map((post, index) => {\n                                return (\n                                    <SinglePost\n                                        key={post.postData._id}\n                                        post={post.postData}\n                                        author={post.authorData}\n                                        setShowOverlay={setShowOverlay}\n                                        setShowPostEditModal={setShowPostEditModal}\n                                        setShowPostDeleteModal={setShowPostDeleteModal}\n                                        setSelectedPost={setSelectedPost}\n                                        setIsHidden={setIsHidden}\n                                        setSelectedPostIndex={setSelectedPostIndex}\n                                        selectedPostIndex={selectedPostIndex}\n                                        executeFocusInput={executeFocusInput}\n                                        setCommentLoading={setCommentLoading}\n                                        index={index}\n                                    />\n                                );\n                            })\n                    )}\n                    {!postLoading ? (\n                        oldPostLoading ? (\n                            <div className=\"w-full\">\n                                <Loading alt={true} />\n                            </div>\n                        ) : (\n                            <button\n                                onClick={loadOlderPosts}\n                                title=\"Load message\"\n                                className={`justify-self-center p-1.5 rounded-md disabled:opacity-50 text-gray-400 hover:text-gray-700 text-xs transition-all mb-1`}\n                            >\n                                Load previous post\n                            </button>\n                        )\n                    ) : (\n                        <div></div>\n                    )}\n                </div>\n                <form\n                    className=\"h-1/4 relative border border-solid border-b border-gray-200 flex flex-col items-center justify-start\"\n                    onSubmit={handlePostSubmit}\n                >\n                    <div className=\"w-full flex items-center justify-end p-1\">\n                        <span className=\"flex items-center justify-between gap-x-2 mr-5 cursor-pointer text-sm bg-gray-200 py-1.5 px-2 rounded-md\">\n                            <input\n                                className=\"form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain float-left cursor-pointer focus:ring-0 focus:ring-offset-0\"\n                                type=\"checkbox\"\n                                id=\"disableComment\"\n                                onChange={handleToggleCommentDisable}\n                                checked={!postBody.commentEnabled}\n                            />\n                            <label className=\"cursor-pointer\" htmlFor=\"disableComment\">\n                                Disable comments\n                            </label>\n                        </span>\n\n                        <button\n                            disabled={disablePost}\n                            type=\"submit\"\n                            title=\"Submit post\"\n                            className=\"py-1 px-2 bg-blue-600 rounded-md text-white disabled:opacity-50 hover:bg-blue-800 transition-all flex items-center justify-between\"\n                        >\n                            Submit\n                        </button>\n                    </div>\n                    <RichEditor\n                        contents={postBody.body}\n                        handleChange={handleChange}\n                        isAutofocus={false}\n                        minHeight={\"12vh\"}\n                        height={\"100%\"}\n                    />\n                </form>\n            </div>\n            <div className=\"col-span-4 p-4 flex flex-col justify-between\">\n                <div>\n                    <h3 className=\"font-bold mb-5\">Comments</h3>\n                    <div className=\"h-650 overflow-y-auto flex flex-col\">\n                        {selectedPostIndex !== -1 ? (\n                            commentLoading ? (\n                                <Loading myStyle={\"w-7 h-7\"} />\n                            ) : (\n                                comments.map((comment) => {\n                                    return (\n                                        <SingleComment\n                                            key={comment.commentData._id}\n                                            author={comment.authorData}\n                                            comment={comment.commentData}\n                                            setShowCommentDeleteModal={setShowCommentDeleteModal}\n                                            setShowOverlay={setShowOverlay}\n                                            setSelectedComment={setSelectedComment}\n                                        />\n                                    );\n                                })\n                            )\n                        ) : (\n                            <div></div>\n                        )}\n                        <div ref={scrollComment}></div>\n                    </div>\n                </div>\n\n                {isHidden || (\n                    <form className=\"group\" onSubmit={handleCommentSubmit}>\n                        <div className=\"grid grid-cols-12 mt-4 border border-gray-400 rounded-full focus-within:ring-2 focus-within:ring-blue-600 focus-within:border-transparent\">\n                            <input\n                                value={commentBody.body}\n                                ref={focusInput}\n                                onChange={handleCommentChange}\n                                name=\"comment\"\n                                type=\"text\"\n                                placeholder=\"Type a comment...\"\n                                className=\"col-span-10 bg-transparent outline-none border-none focus:ring-0 pl-5\"\n                            />\n                            <button\n                                type=\"submit\"\n                                title=\"Submit comment\"\n                                disabled={commentBody.body === \"\" ? true : false}\n                                className=\"w-12 h-12 ml-3 col-start-11 col-span-2 rounded-full flex items-center justify-center place-self-center text-blue-600 disabled:opacity-50\"\n                            >\n                                <PaperAirplaneIcon\n                                    alt={false}\n                                    myStyle={\"h-6 w-6 transform rotate-90\"}\n                                />\n                            </button>\n                        </div>\n                    </form>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}