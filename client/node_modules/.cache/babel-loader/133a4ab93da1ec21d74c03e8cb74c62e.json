{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sweet\\\\Desktop\\\\STEPuHP App Dev opp\\\\client\\\\src\\\\components\\\\notification\\\\NotificationTile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport DotIcon from \"../../assets/icons/DotIcon\";\nimport moment from \"moment\";\nimport AnnotationIcon from \"../../assets/icons/AnnotationIcon\";\nimport DoubleTickIcon from \"../../assets/icons/DoubleTickIcon\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { markNotificationRead } from \"../../actions/notification\";\nimport UserGroupIcon from \"../../assets/icons/UserGroupIcon\";\nimport { authContext } from \"../../contexts/authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NotificationTile = ({\n  content,\n  creator,\n  event,\n  receivers,\n  _id,\n  setShowNotificationModal,\n  setShowOverlay,\n  setModalContent\n}) => {\n  _s();\n\n  // getting uid of the logged in user\n  const {\n    uid\n  } = useContext(authContext);\n  const dispatch = useDispatch();\n  const history = useHistory(); // useeffect to show the post and find the users for which notification is unread\n\n  useEffect(() => {\n    let text = \"\";\n    if (event.type === \"MEETING_CREATED\") text = content === null || content === void 0 ? void 0 : content.description;else if (event.type === \"POST_CREATED\") text = content === null || content === void 0 ? void 0 : content.body.replace(/<[^>]+>/g, \"\");\n    const thisUser = receivers === null || receivers === void 0 ? void 0 : receivers.find(receiver => receiver.user._id.toString() === uid.toString());\n    setText(text);\n    setUser(thisUser);\n  }, [receivers]); // state for the unread user and text content\n\n  const [text, setText] = useState(\"\");\n  const [user, setUser] = useState(null); // console.log(\"receiver user\", user);\n  // function for notification tile clicked action\n\n  const handleAction = () => {\n    setShowNotificationModal(true);\n    setShowOverlay(true);\n    let modalCon = {\n      content,\n      creator,\n      event\n    };\n    setModalContent(modalCon);\n    dispatch(markNotificationRead(history, [{\n      id: _id,\n      willReceive: true\n    }]));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: handleAction,\n    className: `${!(user === null || user === void 0 ? void 0 : user.read) ? \"bg-gray-700 shadow-sm hover:shadow-md rounded-md\" : \"border-b border-gray-500\"} flex items-center justify-between p-2 gap-x-3 mb-2 transition-all mr-2`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-start gap-x-3 justify-between w-full\",\n      children: [!(user === null || user === void 0 ? void 0 : user.read) ? /*#__PURE__*/_jsxDEV(DotIcon, {\n        myStyle: \"h-2 w-2 bg-blue-500 rounded-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(DoubleTickIcon, {\n        myStyle: \"h-4 w-4 text-blue-500 flex-shrink-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-left\",\n          children: event === null || event === void 0 ? void 0 : event.detail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"w-56 overflow-hidden whitespace-nowrap overflow-ellipsis\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-400 flex items-center justify-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-left\",\n            children: `${creator === null || creator === void 0 ? void 0 : creator.firstname} ${creator === null || creator === void 0 ? void 0 : creator.middlename} ${creator === null || creator === void 0 ? void 0 : creator.lastname}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-2 w-1.5 h-1.5 rounded-full bg-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: moment(content === null || content === void 0 ? void 0 : content.createdAt).format(\"LLL\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), (event === null || event === void 0 ? void 0 : event.type) === \"POST_CREATED\" && /*#__PURE__*/_jsxDEV(AnnotationIcon, {\n      myStyle: \"h-8 w-8 text-blue-500 flex-shrink-0\",\n      alt: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), (event === null || event === void 0 ? void 0 : event.type) === \"MEETING_CREATED\" && /*#__PURE__*/_jsxDEV(UserGroupIcon, {\n      myStyle: \"h-8 w-8 text-blue-500 flex-shrink-0\",\n      alt: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(NotificationTile, \"7j8BNd0LpFWSS/SAQ8M4rVmBodE=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = NotificationTile;\nexport default NotificationTile;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotificationTile\");","map":{"version":3,"sources":["C:/Users/sweet/Desktop/STEPuHP App Dev opp/client/src/components/notification/NotificationTile.js"],"names":["React","useContext","useEffect","useState","DotIcon","moment","AnnotationIcon","DoubleTickIcon","useDispatch","useHistory","markNotificationRead","UserGroupIcon","authContext","NotificationTile","content","creator","event","receivers","_id","setShowNotificationModal","setShowOverlay","setModalContent","uid","dispatch","history","text","type","description","body","replace","thisUser","find","receiver","user","toString","setText","setUser","handleAction","modalCon","id","willReceive","read","detail","firstname","middlename","lastname","createdAt","format"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,OAAP,MAAoB,4BAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,cAAP,MAA2B,mCAA3B;AACA,OAAOC,cAAP,MAA2B,mCAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,oBAAT,QAAqC,4BAArC;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,SAASC,WAAT,QAA4B,4BAA5B;;;AAEA,MAAMC,gBAAgB,GAAG,CAAC;AACtBC,EAAAA,OADsB;AAEtBC,EAAAA,OAFsB;AAGtBC,EAAAA,KAHsB;AAItBC,EAAAA,SAJsB;AAKtBC,EAAAA,GALsB;AAMtBC,EAAAA,wBANsB;AAOtBC,EAAAA,cAPsB;AAQtBC,EAAAA;AARsB,CAAD,KASnB;AAAA;;AACF;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAUrB,UAAU,CAACW,WAAD,CAA1B;AAEA,QAAMW,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAMgB,OAAO,GAAGf,UAAU,EAA1B,CALE,CAOF;;AACAP,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIuB,IAAI,GAAG,EAAX;AACA,QAAIT,KAAK,CAACU,IAAN,KAAe,iBAAnB,EAAsCD,IAAI,GAAGX,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAEa,WAAhB,CAAtC,KACK,IAAIX,KAAK,CAACU,IAAN,KAAe,cAAnB,EAAmCD,IAAI,GAAGX,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAEc,IAAT,CAAcC,OAAd,CAAsB,UAAtB,EAAkC,EAAlC,CAAP;AACxC,UAAMC,QAAQ,GAAGb,SAAH,aAAGA,SAAH,uBAAGA,SAAS,CAAEc,IAAX,CACZC,QAAD,IAAcA,QAAQ,CAACC,IAAT,CAAcf,GAAd,CAAkBgB,QAAlB,OAAiCZ,GAAG,CAACY,QAAJ,EADlC,CAAjB;AAGAC,IAAAA,OAAO,CAACV,IAAD,CAAP;AACAW,IAAAA,OAAO,CAACN,QAAD,CAAP;AACH,GATQ,EASN,CAACb,SAAD,CATM,CAAT,CARE,CAmBF;;AACA,QAAM,CAACQ,IAAD,EAAOU,OAAP,IAAkBhC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC8B,IAAD,EAAOG,OAAP,IAAkBjC,QAAQ,CAAC,IAAD,CAAhC,CArBE,CAuBF;AACA;;AACA,QAAMkC,YAAY,GAAG,MAAM;AACvBlB,IAAAA,wBAAwB,CAAC,IAAD,CAAxB;AACAC,IAAAA,cAAc,CAAC,IAAD,CAAd;AACA,QAAIkB,QAAQ,GAAG;AACXxB,MAAAA,OADW;AAEXC,MAAAA,OAFW;AAGXC,MAAAA;AAHW,KAAf;AAKAK,IAAAA,eAAe,CAACiB,QAAD,CAAf;AACAf,IAAAA,QAAQ,CAACb,oBAAoB,CAACc,OAAD,EAAU,CAAC;AAAEe,MAAAA,EAAE,EAAErB,GAAN;AAAWsB,MAAAA,WAAW,EAAE;AAAxB,KAAD,CAAV,CAArB,CAAR;AACH,GAVD;;AAYA,sBACI;AACI,IAAA,OAAO,EAAEH,YADb;AAEI,IAAA,SAAS,EAAG,GACR,EAACJ,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEQ,IAAP,IACM,kDADN,GAEM,0BACT,yEANL;AAAA,4BAQI;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA,iBACK,EAACR,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEQ,IAAP,iBACG,QAAC,OAAD;AAAS,QAAA,OAAO,EAAE;AAAlB;AAAA;AAAA;AAAA;AAAA,cADH,gBAGG,QAAC,cAAD;AAAgB,QAAA,OAAO,EAAE;AAAzB;AAAA;AAAA;AAAA;AAAA,cAJR,eAMI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCACI;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA,oBAA2BzB,KAA3B,aAA2BA,KAA3B,uBAA2BA,KAAK,CAAE0B;AAAlC;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAG,UAAA,SAAS,EAAC,0DAAb;AAAA,oBACKjB;AADL;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAKI;AAAK,UAAA,SAAS,EAAC,+CAAf;AAAA,kCACI;AAAI,YAAA,SAAS,EAAC,WAAd;AAAA,sBAA4B,GAAEV,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAE4B,SAAU,IAAG5B,OAAzB,aAAyBA,OAAzB,uBAAyBA,OAAO,CAAE6B,UAAW,IAAG7B,OAAhD,aAAgDA,OAAhD,uBAAgDA,OAAO,CAAE8B,QAAS;AAA7F;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA,sBAAKxC,MAAM,CAACS,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAEgC,SAAV,CAAN,CAA2BC,MAA3B,CAAkC,KAAlC;AAAL;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA,YARJ,EA0BK,CAAA/B,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEU,IAAP,MAAgB,cAAhB,iBACG,QAAC,cAAD;AAAgB,MAAA,OAAO,EAAE,qCAAzB;AAAgE,MAAA,GAAG,EAAE;AAArE;AAAA;AAAA;AAAA;AAAA,YA3BR,EA6BK,CAAAV,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEU,IAAP,MAAgB,iBAAhB,iBACG,QAAC,aAAD;AAAe,MAAA,OAAO,EAAE,qCAAxB;AAA+D,MAAA,GAAG,EAAE;AAApE;AAAA;AAAA;AAAA;AAAA,YA9BR;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAmCH,CAjFD;;GAAMb,gB;UAaeL,W,EACDC,U;;;KAddI,gB;AAmFN,eAAeA,gBAAf","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport DotIcon from \"../../assets/icons/DotIcon\";\nimport moment from \"moment\";\nimport AnnotationIcon from \"../../assets/icons/AnnotationIcon\";\nimport DoubleTickIcon from \"../../assets/icons/DoubleTickIcon\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { markNotificationRead } from \"../../actions/notification\";\nimport UserGroupIcon from \"../../assets/icons/UserGroupIcon\";\nimport { authContext } from \"../../contexts/authContext\";\n\nconst NotificationTile = ({\n    content,\n    creator,\n    event,\n    receivers,\n    _id,\n    setShowNotificationModal,\n    setShowOverlay,\n    setModalContent,\n}) => {\n    // getting uid of the logged in user\n    const { uid } = useContext(authContext);\n\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    // useeffect to show the post and find the users for which notification is unread\n    useEffect(() => {\n        let text = \"\";\n        if (event.type === \"MEETING_CREATED\") text = content?.description;\n        else if (event.type === \"POST_CREATED\") text = content?.body.replace(/<[^>]+>/g, \"\");\n        const thisUser = receivers?.find(\n            (receiver) => receiver.user._id.toString() === uid.toString()\n        );\n        setText(text);\n        setUser(thisUser);\n    }, [receivers]);\n\n    // state for the unread user and text content\n    const [text, setText] = useState(\"\");\n    const [user, setUser] = useState(null);\n\n    // console.log(\"receiver user\", user);\n    // function for notification tile clicked action\n    const handleAction = () => {\n        setShowNotificationModal(true);\n        setShowOverlay(true);\n        let modalCon = {\n            content,\n            creator,\n            event,\n        };\n        setModalContent(modalCon);\n        dispatch(markNotificationRead(history, [{ id: _id, willReceive: true }]));\n    };\n\n    return (\n        <div\n            onClick={handleAction}\n            className={`${\n                !user?.read\n                    ? \"bg-gray-700 shadow-sm hover:shadow-md rounded-md\"\n                    : \"border-b border-gray-500\"\n            } flex items-center justify-between p-2 gap-x-3 mb-2 transition-all mr-2`}\n        >\n            <div className=\"flex items-start gap-x-3 justify-between w-full\">\n                {!user?.read ? (\n                    <DotIcon myStyle={\"h-2 w-2 bg-blue-500 rounded-full\"} />\n                ) : (\n                    <DoubleTickIcon myStyle={\"h-4 w-4 text-blue-500 flex-shrink-0\"} />\n                )}\n                <div className=\"text-white w-full\">\n                    <h4 className=\"text-left\">{event?.detail}</h4>\n                    <p className=\"w-56 overflow-hidden whitespace-nowrap overflow-ellipsis\">\n                        {text}\n                    </p>\n                    <div className=\"text-gray-400 flex items-center justify-start\">\n                        <h6 className=\"text-left\">{`${creator?.firstname} ${creator?.middlename} ${creator?.lastname}`}</h6>\n                        <div className=\"mx-2 w-1.5 h-1.5 rounded-full bg-gray-400\"></div>\n                        <h6>{moment(content?.createdAt).format(\"LLL\")}</h6>\n                    </div>\n                </div>\n            </div>\n            {event?.type === \"POST_CREATED\" && (\n                <AnnotationIcon myStyle={\"h-8 w-8 text-blue-500 flex-shrink-0\"} alt={false} />\n            )}\n            {event?.type === \"MEETING_CREATED\" && (\n                <UserGroupIcon myStyle={\"h-8 w-8 text-blue-500 flex-shrink-0\"} alt={false} />\n            )}\n        </div>\n    );\n};\n\nexport default NotificationTile;\n"]},"metadata":{},"sourceType":"module"}