{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\STEPuHP\\\\Student_Mentoring_System-main\\\\client\\\\src\\\\components\\\\dashboard\\\\mentorDashboard\\\\dashboardLinks\\\\chat\\\\chatSideBar\\\\ChatTile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport DotIcon from \"../../../../../../assets/icons/DotIcon\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authContext } from \"../../../../../../contexts/authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatTile = ({\n  chat,\n  index,\n  setChatSelection,\n  thatUser,\n  setCurChat,\n  setTmpList\n}) => {\n  _s();\n\n  var _thatUser$user, _thatUser$user$avatar, _thatUser$user2, _thatUser$user3, _thatUser$user3$avata, _thatUser$user4, _thatUser$user5, _thatUser$user6, _chat$latestMessage, _chat$latestMessage2;\n\n  const {\n    uid\n  } = useContext(authContext);\n  const dispatch = useDispatch(); // accessing global store for the notification array to show notifications\n\n  const {\n    notifications\n  } = useSelector(state => state.chat);\n  console.log(\"notifications\", notifications);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-4 flex flex-col items-end\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        localStorage.setItem(\"0\", index);\n        setChatSelection(chat._id);\n\n        if (notifications.includes(chat._id)) {\n          let tmp = notifications.filter(id => id !== chat._id.toString());\n          dispatch({\n            type: \"UPDATE_NOTIFICATION\",\n            tmp\n          });\n        }\n\n        localStorage.setItem(\"persistChat\", JSON.stringify({\n          chatId: chat._id,\n          chatIndex: index\n        }));\n        let thisChat = chat.users.find(user => user.user._id !== uid);\n        setCurChat({\n          avatar: thisChat.user.avatar.url,\n          name: `${thisChat.user.firstname} ${thisChat.user.middlename} ${thisChat.user.lastname}`\n        });\n        setTmpList([]);\n      },\n      className: `grid w-full grid-cols-chatTab p-2 hover:bg-gray-200 cursor-pointer rounded-md transition-all ${localStorage.getItem(\"0\") !== null && JSON.parse(localStorage.getItem(\"0\")) === index ? \"bg-gray-200\" : \"\"}`,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"h-12 w-12 rounded-full\",\n        src: (thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user = thatUser.user) === null || _thatUser$user === void 0 ? void 0 : (_thatUser$user$avatar = _thatUser$user.avatar) === null || _thatUser$user$avatar === void 0 ? void 0 : _thatUser$user$avatar.url) === \"\" ? `https://avatars.dicebear.com/api/initials/${thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user2 = thatUser.user) === null || _thatUser$user2 === void 0 ? void 0 : _thatUser$user2.firstname}.svg` : thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user3 = thatUser.user) === null || _thatUser$user3 === void 0 ? void 0 : (_thatUser$user3$avata = _thatUser$user3.avatar) === null || _thatUser$user3$avata === void 0 ? void 0 : _thatUser$user3$avata.url,\n        alt: \"img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-full mx-6 flex-col items-start justify-evenly overflow-hidden whitespace-nowrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: `${thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user4 = thatUser.user) === null || _thatUser$user4 === void 0 ? void 0 : _thatUser$user4.firstname} ${thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user5 = thatUser.user) === null || _thatUser$user5 === void 0 ? void 0 : _thatUser$user5.middlename} ${thatUser === null || thatUser === void 0 ? void 0 : (_thatUser$user6 = thatUser.user) === null || _thatUser$user6 === void 0 ? void 0 : _thatUser$user6.lastname}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: chat === null || chat === void 0 ? void 0 : (_chat$latestMessage = chat.latestMessage) === null || _chat$latestMessage === void 0 ? void 0 : _chat$latestMessage.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-3 flex flex-col items-center justify-evenly\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          children: moment(chat === null || chat === void 0 ? void 0 : (_chat$latestMessage2 = chat.latestMessage) === null || _chat$latestMessage2 === void 0 ? void 0 : _chat$latestMessage2.createdAt).calendar()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), notifications.includes(chat._id) ? /*#__PURE__*/_jsxDEV(DotIcon, {\n          myStyle: \"h-3 w-3 bg-green-500 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-5/6 h-px bg-gray-200\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChatTile, \"3HBYxtS/oFG/Dte9tJQyYSyuvO4=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = ChatTile;\nexport default ChatTile;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatTile\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/STEPuHP/Student_Mentoring_System-main/client/src/components/dashboard/mentorDashboard/dashboardLinks/chat/chatSideBar/ChatTile.js"],"names":["React","useContext","DotIcon","moment","useDispatch","useSelector","authContext","ChatTile","chat","index","setChatSelection","thatUser","setCurChat","setTmpList","uid","dispatch","notifications","state","console","log","localStorage","setItem","_id","includes","tmp","filter","id","toString","type","JSON","stringify","chatId","chatIndex","thisChat","users","find","user","avatar","url","name","firstname","middlename","lastname","getItem","parse","latestMessage","content","createdAt","calendar"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport DotIcon from \"../../../../../../assets/icons/DotIcon\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authContext } from \"../../../../../../contexts/authContext\";\n\nconst ChatTile = ({ chat, index, setChatSelection, thatUser, setCurChat, setTmpList }) => {\n    const { uid } = useContext(authContext);\n    const dispatch = useDispatch();\n\n    // accessing global store for the notification array to show notifications\n    const { notifications } = useSelector((state) => state.chat);\n\n    console.log(\"notifications\", notifications);\n\n    return (\n        <div className=\"mb-4 flex flex-col items-end\">\n            <div\n                onClick={() => {\n                    localStorage.setItem(\"0\", index);\n                    setChatSelection(chat._id);\n                    if (notifications.includes(chat._id)) {\n                        let tmp = notifications.filter((id) => id !== chat._id.toString());\n                        dispatch({ type: \"UPDATE_NOTIFICATION\", tmp });\n                    }\n                    localStorage.setItem(\n                        \"persistChat\",\n                        JSON.stringify({\n                            chatId: chat._id,\n                            chatIndex: index,\n                        })\n                    );\n                    let thisChat = chat.users.find((user) => user.user._id !== uid);\n                    setCurChat({\n                        avatar: thisChat.user.avatar.url,\n                        name: `${thisChat.user.firstname} ${thisChat.user.middlename} ${thisChat.user.lastname}`,\n                    });\n                    setTmpList([]);\n                }}\n                className={`grid w-full grid-cols-chatTab p-2 hover:bg-gray-200 cursor-pointer rounded-md transition-all ${\n                    localStorage.getItem(\"0\") !== null &&\n                    JSON.parse(localStorage.getItem(\"0\")) === index\n                        ? \"bg-gray-200\"\n                        : \"\"\n                }`}\n            >\n                <img\n                    className=\"h-12 w-12 rounded-full\"\n                    src={\n                        thatUser?.user?.avatar?.url === \"\"\n                            ? `https://avatars.dicebear.com/api/initials/${thatUser?.user?.firstname}.svg`\n                            : thatUser?.user?.avatar?.url\n                    }\n                    alt=\"img\"\n                />\n                <div className=\"flex w-full mx-6 flex-col items-start justify-evenly overflow-hidden whitespace-nowrap\">\n                    <h3>{`${thatUser?.user?.firstname} ${thatUser?.user?.middlename} ${thatUser?.user?.lastname}`}</h3>\n                    <h6>{chat?.latestMessage?.content}</h6>\n                </div>\n                <div className=\"px-3 flex flex-col items-center justify-evenly\">\n                    <h6>{moment(chat?.latestMessage?.createdAt).calendar()}</h6>\n                    {notifications.includes(chat._id) ? (\n                        <DotIcon myStyle={\"h-3 w-3 bg-green-500 rounded-full\"} />\n                    ) : (\n                        <div></div>\n                    )}\n                </div>\n            </div>\n            <div className=\"w-5/6 h-px bg-gray-200\"></div>\n        </div>\n    );\n};\n\nexport default ChatTile;\n"]},"metadata":{},"sourceType":"module"}